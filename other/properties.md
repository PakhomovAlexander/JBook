## Properties

### Введение
Со временем, в развивающемся `Java` приложении, возникает необходимость хранения простых параметров в виде пар ключ-значение вне скомпилированного кода. К примеру, инициализация и конфигурация программы из файла.

Эту функциональность предоставляет класс `Properties` из пакета `java.util`. Он представляет собой постоянный набор свойств и может быть сохранен или загружен из потока.

* `Properties` наследуется от `Hashtable`
* Он используется для ведения списка значений, в котором ключ является строкой, а значение также является строкой.
* Одна полезная возможность класса `Properties` состоит в том, что вы можете указать свойство по умолчанию, которое будет возвращаться, если никакое значение не связано с определенным ключом.
* Несколько потоков могут совместно использовать один объект свойств без необходимости внешней синхронизации.

### Загрузка Свойств

#### Из `.properties` файла

Рассмотрим пример, в котором пары ключ-значение хранятся в файле с расширением `.properties`.
Структура файла проста. Слева находится ключ. Дальше следует разделитель (`=` или `:`). И затем значение. Если имя параметра требует пробела, то необходимо перед ним поставить экранирующий символ `\`. Комментарии начинаются с `#` `!`.
```
! properties example
version=1.0
name=TestApp
date=2019-29-12
```

Относительный путь к файлу:
```java
String path = "config.properties";
```

Класс имеет два конструктора: Пустой и, принимающий Свойства, используемые по умолчанию. Загрузка происходит с помощью метода `load`.
```java
Properties configProps = new Properties();
configProps.load(new FileInputStream(path));
```
О том, как использовать загруженный набор параметров будет сказано позже.

#### Из `XML` файла

Помимо `.properties` файла, можно использовать XML-файл удовлетворяющий [DTD](https://en.wikipedia.org/wiki/Document_type_definition) спецификации.

```xml
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE properties>
<properties>
    <comment>xml example</comment>
    <entry key="version">1.0</entry>
    <entry key="name">TestApp</entry>
    <entry key="date">2019-29-12</entry>
</properties>
```

Загрузка происходит аналогично `.properties` файлу.

### Использование

#### Получение

Получить значение можно с помощью методов `getProperty(String key)` и `getProperty(String key, String defaultValue)`, возвращающих строки.

Для второго метода, в случае, если параметр `key` не найден, по умолчанию будет подставлено значение 'defaultValue'.

Стоит отметить, что класс `Properties` наследуется от `Hashtable` метод `get()`, который использовать не рекомендуется. Так как этот метод возвращает `Object`, который может быть приведен только к `String`, что уже реализовано в методе `getProperty()`.
А следующий код выбросит исключение:
```java
float version = (float) configProps.get("version");
```

#### Изменение/Добавление

Для изменения значения используется метод `String key, String value`. В случае, если `key` не существует, будет добавлен новый параметр со значением 'value'.

configProps.setProperty("version", "2.0"); // update an old value
congigProps.setProperty("author", "QCH band"); // add new key-value

Так же следует предостеречь от использования методов вставки, наследуемых от `Hashtable`. Только `String` значения могут быть использованы в `Properties`.

Следующий код будет работать не так, как ожидается, так как при вызове метода `getProperty()` будет возвращен `null`;
```java
configProps.put("version", 2.0);
```

#### Удаление

Для удаления используется метод `remove()`.
```java
configProps.remove("version");   
```

### Хранение

#### В `.properties` файле
Запись в файл осуществляется с помощью метода `store()`
```java
configProps.store(new FileWriter(path), "store to properties file");
```
Второй параметр - комментарий. Если нет необходимости комментировать, используется `null`.

#### В `XML` файле
Для XML-файлов используется метод `storeToXML()` аналогично `.properties`.
```java
configProps.storeToXML(new FileOutputStream(path), "store to xml file");
```

### Пример использование в другой библиотеке (kafka)

//todo Kafka example

### Заключение
//todo improve
`Properties` являются одним из самых простых способов передачи текстовых параметров в приложения стандартными средствами.